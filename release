#!/bin/bash
# Bump a release of ember-cli-detergent or push the Release to Gemfury
#./release patch
#./release minor
#./release major
#./release fury

echo "--------------------------" &&
echo "Grabbing the latest master" &&
echo "--------------------------" &&
git checkout master
git fetch origin
git reset --hard origin/master

if [[ $1 == "fury" ]]
then
  echo "------------------" &&
  echo "Pushing to GemFury" &&
  echo "------------------" &&
  git push fury master
else
  echo "-------------------------------------------" &&
  echo "Doing a $1 release of ember-cli-detergent       " &&
  echo "-------------------------------------------" &&
  git branch -D ember-cli-detergent/version_bump
  git checkout -b ember-cli-detergent/version_bump
  npm version $1 --no-git-tag-version
  git commit package.json -m "Bump the ember-cli-detergent version"
  git push origin ember-cli-detergent/version_bump
fi
